<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    
    <title>蚊香的博客</title>
    <link rel="stylesheet" type="text/css" href="/static/css/semantic.min.css">
    <style type="text/css">
        @font-face {
            font-family: 'myHan';
            src: URL('/static/fonts/HYGuoQiangXingShuW-1.ttf') format('truetype');
        }
        
        .han {
            font-weight: normal;
            font-family: "myHan";
        }
        
        .postContent h1 {
            font-size: 1.5em;
        }
        
        .postContent h2 {
            font-size: 1.25em;
        }
        
        .postContent h3 {
            font-size: 1em;
        }
        
        .hidden.menu {
            display: none;
        }
        
        .masthead.segment {
            min-height: 200px;
            padding: 1em 0em;
        }
        
        .masthead .logo.item img {
            margin-right: 1em;
        }
        
        .masthead .ui.menu .ui.button {
            margin-left: 0.5em;
        }
        
        .masthead h1.ui.header {
            margin-top: 1em;
            margin-bottom: 0em;
            font-size: 2.33em;
        }
        
        .masthead h2 {
            font-size: 1.7em;
        }
        
        .ui.vertical.stripe {
            padding: 8em 0em;
        }
        
        .ui.vertical.stripe h3 {
            font-size: 2em;
        }
        
        .ui.vertical.stripe .button+h3,
        .ui.vertical.stripe p+h3 {
            margin-top: 3em;
        }
        
        .ui.vertical.stripe .floated.image {
            clear: both;
        }
        
        .ui.vertical.stripe p {
            font-size: 1.33em;
        }
        
        .ui.vertical.stripe .horizontal.divider {
            margin: 3em 0em;
        }
        
        .quote.stripe.segment {
            padding: 0em;
        }
        
        .quote.stripe.segment .grid .column {
            padding-top: 5em;
            padding-bottom: 5em;
        }
        
        .footer.segment {
            padding: 5em 0em;
        }
        
        .secondary.pointing.menu .toc.item {
            display: none;
        }
        
        @media only screen and (max-width: 700px) {
            .ui.fixed.menu {
                display: none !important;
            }
            .secondary.pointing.menu .item,
            .secondary.pointing.menu .menu {
                display: none;
            }
            .secondary.pointing.menu .toc.item {
                display: block;
            }
            .masthead.segment {
                min-height: 350px;
            }
            .masthead h1.ui.header {
                font-size: 2em;
                margin-top: 1.5em;
            }
            .masthead h2 {
                margin-top: 0.5em;
                font-size: 1.5em;
            }
        }
    </style>

    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/semantic.js"></script>
    <script>
        $(document)
            .ready(function() {

                
                $('.masthead')
                    .visibility({
                        once: false,
                        onBottomPassed: function() {
                            $('.fixed.menu').transition('fade in');
                        },
                        onBottomPassedReverse: function() {
                            $('.fixed.menu').transition('fade out');
                        }
                    });

                
                $('.ui.sidebar')
                    .sidebar('attach events', '.toc.item');

            });
    </script>
</head>

<body>

    
    <div class="ui large top fixed hidden menu">
        <div class="ui container nav">
            <a class="active item">首页</a></a>
            <a class="item">Category</a>
            <a class="item">标签</a>
            <a class="item">About</a>
            <div class="right item">
                <div class="ui animated fade button" tabindex="0">
                    <div class="visible content">赋此间一抹丹砂</div>
                    <div class="hidden content"><a href="">回到顶端</a></div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="ui vertical inverted sidebar menu">
        <a class="active item">首页</a>
        <a class="item">归档</a>
        <a class="item">标签</a>
        <a class="item">关于</a>
    </div>


    
    <div class="pusher">
        <div class="ui inverted vertical masthead center aligned segment">

            <div class="ui container">
                <div class="ui large secondary inverted pointing menu">
                    <a class="toc item">
                        <i class="sidebar icon"></i>
                    </a>
                    <div class="left item">
                        <a class="ui inverted button" href="/">清 | 狂</a>
                    </div>
                    <div class="right item">
                        <a class="active item" href="/">Home</a>
                        <a class="item">分类</a>
                        <a class="item">Tags</a>
                        <a class="item">关于我</a>

                    </div>
                </div>
            </div>

            <div class="ui text container">
                <h1 class="ui inverted header">
                    <span class="han">
                    不知道为什么，就是要写一句话放这里!
                    </span>
                </h1>
                <h2 class="han">Do whatever you want when you want to.</h2>
            </div>

        </div>

        <div class="ui vertical stripe segment">
            <div class="ui text container">
                
                <h3 class="ui header"><a href="/2016/12/22/%ef%bc%88%e7%bf%bb%e8%af%91%ef%bc%89Sharding-mongo%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a33.2%e7%89%88%e6%9c%ac">（翻译）Sharding-mongo官方文档3.2版本</a></h3>
                <div class="postContent">
                    <hr />

<p>此篇文章为mongo官方文档，版本为3.2. 地址为：<a href="https://docs.mongodb.com/v3.2/core/sharded-cluster-components/">https://docs.mongodb.com/v3.2/core/sharded-cluster-components/</a></p>

<h1>分片（Sharding）</h1>

<p>分片是一个在多个主机上分发数据的方法。 MongoDB用分片实现大数据集合和高吞入量操作。
大数据量集合和高吞吐量操作应用数据库系统挑战单个服务器的容量。例如，高请求速率能耗尽CPU性能。工作集大小大于系统的RAM给磁盘驱动器的I / O性能施加压力
有两种方法处理系统的增长：垂直扩展和水平扩展
垂直扩展涉及扩大单个服务器的性能，例如使用更强大的CPU，添加更多RAM，或者增加存储空间。可用技术中的限制可能会限制单个机器的工作负载能力。另外，云服务提供商在可用的硬件配置上设置上限。所以，对于垂直扩展存在实际的最大值。
水平扩展涉及将系统的数据集切分并通过多服务器加载，添加另外的服务器来扩大需要的容量。既然单个机器的整体速度和容量不高，那么每个机器处理整个工作量的一部分，可能提供比一个高速度高容量服务器更好的效果。扩展部署的容量仅需要根据需要添加额外的服务器，总体成本可能比单个机器的高端硬件低。
MongoDb支持通过分片来进行水平扩展。</p>

<h2>分片集群</h2>

<p>MongoDB的分片集群由以下组件组成：
- 分片（shard）：每个分片包含被分片数据的子集。每个分片可以被部署成副本集
- mongos:mogos扮演查询路由（query router）的角色，提供一个在客户端个分片集群之间的接口
- config servers: 配置服务器存储元数据（metadata）并配置集群的设置。在MongoDB 3.4，配置服务器必须部署成副本集</p>

<p>下面这张图描述了在一个分片集群中的交互
<img src="https://docs.mongodb.com/manual/_images/sharded-cluster-production-architecture.png" alt="Alt text" /></p>

<p>MongoDB分片数据是collection级别的，在集群中分发collection数据</p>

                </div>
                <a class="ui large button" href="/2016/12/22/%ef%bc%88%e7%bf%bb%e8%af%91%ef%bc%89Sharding-mongo%e5%ae%98%e6%96%b9%e6%96%87%e6%a1%a33.2%e7%89%88%e6%9c%ac">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">这是分界线哦~~</a>
                </h4>
                
                <h3 class="ui header"><a href="/2016/12/22/MongoDB-Sharding%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4">MongoDB-Sharding常用命令</a></h3>
                <div class="postContent">
                    <hr />

<p>资料来源： <a href="https://docs.mongodb.com/v3.2/tutorial/administer-shard-tags/">https://docs.mongodb.com/v3.2/tutorial/administer-shard-tags/</a>
详细命令参考： <a href="https://docs.mongodb.com/v3.2/reference/sharding/">https://docs.mongodb.com/v3.2/reference/sharding/</a></p>

<h1>分片常用</h1>

<h2>配置Sharding</h2>

<ul>
<li><p>连接路由服务器</p>

<pre><code>.\bin\mongo.exe admin --port 40000
</code></pre></li>

<li><p>设置分片服务器</p>

<pre><code>db.runCommand({ addshard:&quot;127.0.0.1:27100&quot; })
db.runCommand({ addshard:&quot;127.0.0.1:27101&quot; })
db.runCommand({ addshard:&quot;127.0.0.1:27017&quot; })
或者
sh.addShard(&quot;127.0.0.1:27100&quot;)
</code></pre></li>

<li><p>设置要分片的数据库</p>

<pre><code>db.runCommand({ enablesharding:&quot;qdgame&quot; })
或者：
sh.enableSharding(&quot;qdgame&quot;)
</code></pre></li>

<li><p>关闭balancing</p>

<pre><code>sh.disableBalancing(&quot;qdgame.backpack&quot;)
</code></pre></li>
</ul>

                </div>
                <a class="ui large button" href="/2016/12/22/MongoDB-Sharding%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">这是分界线哦~~</a>
                </h4>
                
                <h3 class="ui header"><a href="/2016/12/20/%e3%80%8aGo%e8%af%ad%e8%a8%80%e5%9c%a3%e7%bb%8f%e3%80%8b%e5%ad%a6%e4%b9%a0%e5%b0%8f%e8%ae%b0%ef%bc%882%ef%bc%89">《Go语言圣经》学习小记（2）</a></h3>
                <div class="postContent">
                    <hr />

<h2>函数</h2>

<h3>函数声明</h3>

<p>在函数体中，函数的形参作为局部变量，被初始化为调用者提供的值。函数的形参和有名返回值作为<strong>函数最外层的局部变量</strong>，被存储在相同的词法块中。
实参通过值的方式传递，因此函数的形参是实参的拷贝。对形参进行修改不会影响实参。但是，如果实参包括引用类型，如指针，slice(切片)、map、<strong>function</strong>、channel等类型，实参可能会由于函数的简介引用被修改。
<strong>没有函数体的函数声明，这表示该函数不是以Go实现的。</strong>这样的声明定义了函数标识符。</p>

<pre><code class="language-golang">package math
func Sin(x float64) float //implemented in assembly language
</code></pre>

<p>注：此代码来自官方的math包中</p>

                </div>
                <a class="ui large button" href="/2016/12/20/%e3%80%8aGo%e8%af%ad%e8%a8%80%e5%9c%a3%e7%bb%8f%e3%80%8b%e5%ad%a6%e4%b9%a0%e5%b0%8f%e8%ae%b0%ef%bc%882%ef%bc%89">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">这是分界线哦~~</a>
                </h4>
                
                <h3 class="ui header"><a href="/2016/12/09/mongo%e6%95%b0%e6%8d%ae%e5%ba%93sharding%e5%ad%a6%e4%b9%a0%e8%ae%b0%e5%bd%95">mongo数据库sharding学习记录</a></h3>
                <div class="postContent">
                    <hr />

<p>参考文章：<a href="http://www.runoob.com/mongodb/mongodb-sharding.html">http://www.runoob.com/mongodb/mongodb-sharding.html</a></p>

<p>windows系统。mongo3.2版本</p>

<p>建立目录s0,s1,log,config</p>

<p>步骤一：启动Shard Server</p>

<pre><code>.\bin\mongod.exe --port 27100 --dbpath=.\mongos\s0 --logpath=.\mongos\log\s0.log --logappend --journal --storageEngine=mmapv1 --shardsvr

.\bin\mongod.exe --port 27101 --dbpath=.\mongos\s1 --logpath=.\mongos\log\s1.log --logappend --journal --storageEngine=mmapv1 --shardsvr
</code></pre>

                </div>
                <a class="ui large button" href="/2016/12/09/mongo%e6%95%b0%e6%8d%ae%e5%ba%93sharding%e5%ad%a6%e4%b9%a0%e8%ae%b0%e5%bd%95">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">这是分界线哦~~</a>
                </h4>
                
                <h3 class="ui header"><a href="/2016/12/07/%e3%80%8aGo%e8%af%ad%e8%a8%80%e5%9c%a3%e7%bb%8f%e3%80%8b%e5%ad%a6%e4%b9%a0%e5%b0%8f%e8%ae%b0%ef%bc%881%ef%bc%89">《Go语言圣经》学习小记（1）</a></h3>
                <div class="postContent">
                    <hr />

<p>记录《Go语言圣经》学习笔记。（实为划重点）</p>

<p>顺序通信进程 （ communicating sequential processes ，缩写为CSP）。在CSP中，程序是一组中间没有共享状态的平行运行的处理过程，它们之间使用管道进行通信和控制同步。
Go语言的官方博客 <a href="https://blog.golang.org">https://blog.golang.org</a> 会不定期发布一些Go语言最好的实践文章，包括当前语言的发展状态、未来 的计划、会议报告和Go语言相关的各种会议的主题等信息（译注： <a href="http://talks.golang.org/">http://talks.golang.org/</a> 包含了 官方收录的各种报告的讲稿）。</p>

                </div>
                <a class="ui large button" href="/2016/12/07/%e3%80%8aGo%e8%af%ad%e8%a8%80%e5%9c%a3%e7%bb%8f%e3%80%8b%e5%ad%a6%e4%b9%a0%e5%b0%8f%e8%ae%b0%ef%bc%881%ef%bc%89">Read More</a>
                <h4 class="ui horizontal header divider">
                    <a href="#">这是分界线哦~~</a>
                </h4>
                
                <div class="ui large buttons">
                    <button class="ui button" ><a href="/">上一页</a></button>
                    <div class="or"></div>
                    <button class="ui button" ><a href="/page/3">下一页</a></button>
                </div>
            </div>
        </div>


        <div class="ui inverted vertical footer segment">
            <div class="ui container">
                <div class="ui stackable inverted divided equal height stackable grid">
                    <div class="three wide column">
                    </div>
                </div>
            </div>
        </div>
    </div>


</body>

</html>